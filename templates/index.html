{% extends "base.html" %}
{% block title %} {{index_title}} {% endblock %}

{% block body_content %}
<div class="bg-search p-3">
    <div class="container">
        <div class="row">
            <form class="input-group" action="/" method="post">
                <!--<div class="form-check p-3">
                    <input class="form-check-input" type="radio" name="keywords" id="keywords" value="True"/>
                    <label class="form-check-label" for="keywords"> Keywords </label>
                </div>
                <div class="form-check p-3">
                    <input class="form-check-input" type="radio" name="abstract" id="abstract" value="True"/>
                    <label class="form-check-label" for="abstract"> Abstract </label>
                </div>
                <div class="form-check p-3">
                    <input class="form-check-input" type="radio" name="domain" id="domain" value="True"/>
                    <label class="form-check-label" for="domain"> Domain </label>
                </div> -->
                <input type="text" name="searchWord" class="form-control"
                       placeholder="Journal Name, Frequency, Aims and Scope or Indexing and Abstracting ...">
                <button type="button" class="btn btn-primary" aria-expanded="false">Search</button>
                <button type="button" class="btn btn-dark" data-bs-toggle="collapse" data-bs-target="#advanced-search"
                        aria-controls="advanced-search">
                    Advanced Search
                </button>
                <!--<select class="form-select" name="row_select">
                    <option selected>Select Row Size</option>
                    {% for o in rowlist %}
                    <option value="{{ o.name }}">{{ o.name }}</option>
                    {% endfor %}
                </select>
                <ul class="dropdown-menu dropdown-menu-end">
                    <div class="form-check">
                        <li class="p-3">
                            <input class="form-check-input" type="checkbox" id="solr" name="solr" value="True"
                                   checked>
                            <label class="form-check-label" for="solr"> Solr </label><br>
                        </li>
                        <li class="p-3">
                            <input class="form-check-input" type="checkbox" id="es" name="es" value="True" checked>
                            <label class="form-check-label" for="es"> Elasticsearch </label><br>
                        </li>
                    </div>
                </ul> -->
            </form>
            <div class="collapse" id="advanced-search">
                <div class=" container p-3">
                    <div class="row">
                        <input type="text" name="rating" class="form-control col m-1"
                               placeholder="Rating">
                        <input type="text" name="frequency" class="form-control col m-1"
                               placeholder="Frequency">
                        <input type="text" name="wos-core" class="form-control col m-1"
                               placeholder="WoS Core Collection">
                    </div>
                </div>
            </div>
        </div>
        <!-- <div class="col-sm-6">
            {% if es_results and es_results|length > 0 %}
            {% if es_count_results is not none %}
            <p class="alert alert-danger text-center"><b>Number of Data: </b>{{ es_count_results
                }}&emsp;<b>Time: </b>{{es_finTime}}</p>
            {% endif %}
            <table class="table">
                <thead>
                <tr>
                    <th>Keywords</th>
                    <th>Domain</th>
                    <th>Area</th>
                    <th>Abstract</th>
                </tr>
                </thead>
                <tbody>
                {% for hit in es_results%}
                <tr>
                    <td>{% if hit['_source']['keywords']%}{{ hit['_source']['keywords'] }}{% endif %}</td>
                    <td>{% if hit['_source']['Domain']%}{{ hit['_source']['Domain'] }}{% endif %}</td>
                    <td>{% if hit['_source']['area']%}{{ hit['_source']['area'] }}{% endif %}</td>
                    <td>{% if hit['_source']['Abstract']%}{{ hit['_source']['Abstract'] }}{% endif %}</td>
                </tr>
                {% endfor %}
                </tbody>
            </table>
            {% endif %}
        </div> -->
    </div>
</div>
<div class="container p-3">
    <div class="row">
        {% if results and results|length > 0 %}
        <div class="col-lg-10 border-bottom">
            {% if numresults is not none %}
            <p class="text-secondary"><i>Approximately {{ numresults }} results found
                ({{'%0.2f'|format(timeFin|float)}}
                seconds)</i></p>
            {% endif %}
        </div>
        <div class="col-lg-2">
            <!--<label class="form-select-text" for="sort-by">Sort By: </label> -->
            <select class="form-select" id="sort-by" about="Sort by">
                <option value="1"> Sort by relevancy</option>
                <option value="2"> Sort by rating</option>
            </select>
        </div>
        {% for document in results %}
        <div class="col-lg-8 p-2 border-bottom">
            <a class="results-title"
               href="{% if document['Journal_Website']%}{{ document['Journal_Website'][0]}}{% endif %}" target="_blank">
                <p>{% if document['Journal_Name']%}{{ document['Journal_Name'][0]}}{% endif %}</p>
            </a>
            <p class="results-aas">
                <b>Aims and Scope:</b>
                {% if document['Aims_and_Scope']%}{{ document['Aims_and_Scope'][0]}}{% endif %}
            </p>
            <p class="results-iaa">
                <b>Indexing and Abstracting:</b>
                {% if document['Indexing_and_Abstracting']%}{{ document['Indexing_and_Abstracting'][0]}}{% endif %}
            </p>
        </div>
        <div class="col-lg-3 m-2 bg-light">
            <label class="p-2"> Popularity: 5/10 </label>
            <div class="progress">
                <div class="progress-bar bg-success" role="progressbar" style="width: 50%"
                     aria-valuemin="0" aria-valuemax="100"></div>
            </div>
            <div class="read-more p-2">
                <a href="/" data-bs-toggle="modal" data-bs-target="#read-more{{ document.id }}">Read More</a>
            </div>
        </div>


        <!-- Modal -->
        <div class="modal fade" id="read-more{{ document.id }}" data-bs-backdrop="static" data-bs-keyboard="false"
             tabindex="-1"
             aria-labelledby="read-more" aria-hidden="true">
            <div class="modal-dialog modal-xl modal-dialog-centered">
                <div class="modal-content" role="document">
                    <div class="modal-header">
                        <h1 class="modal-title fs-4">Details for Journal</h1>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <p>
                            <b>Journal Name: </b>
                            {% if document['Journal_Name']%}{{ document['Journal_Name'][0]}}{% endif %}
                        </p>
                        <p>
                            <b>Publisher: </b>
                            {% if document['Publisher']%}{{ document['Publisher'][0]}}{% endif %}
                        </p>
                        <p>
                            <b>ISSN / eISSN: </b>
                            {% if document['ISSN___eISSN']%}{{ document['ISSN___eISSN'][0]}}{% endif %}
                        </p>
                        <p>
                            <b>Web of Science Core Collection: </b>
                            {% if document['Web_of_Science_Core_Collection']%}{{
                            document['Web_of_Science_Core_Collection'][0]}}{% endif %}
                        </p>
                        <p>
                            <b>Additional Web of Science Indexes: </b>
                            {% if document['Additional_Web_of_Science_Indexes']%}{{
                            document['Additional_Web_of_Science_Indexes'][0]}}{% endif %}
                        </p>
                        <p>
                            <b>Journal Website:</b>
                            <a href="{% if document['Journal_Website']%}{{ document['Journal_Website'][0]}}{% endif %}"
                               target="_blank">
                                {% if document['Journal_Website']%}{{ document['Journal_Website'][0]}}{% endif %}
                            </a>
                        </p>
                        <p>
                            <b>Publication Frequency: </b>
                            {% if document['Publication_Frequency']%}{{ document['Publication_Frequency'][0]}}{% endif
                            %}
                        </p>
                        <p>
                            <b>Aims and Scope: </b>
                            {% if document['Aims_and_Scope']%}{{ document['Aims_and_Scope'][0]}}{% endif %}
                        </p>
                        <p>
                            <b>Indexing and Abstracting: </b>
                            {% if document['Indexing_and_Abstracting']%}{{ document['Indexing_and_Abstracting'][0]}}{%
                            endif %}
                        </p>
                        <div class="input-group m-3">
                            <input type="text" class="form-control m-2" placeholder="Comment"
                                   aria-label="Comment" aria-describedby="comment">
                            <div class="input-group-append m-2">
                                <button class="btn btn-outline-secondary" type="button" id="comment">Comment</button>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}
        <nav class="p-3">
            <ul class="pagination justify-content-end">
                <li class="page-item disabled">
                    <a class="page-link">Previous</a>
                </li>
                <li class="page-item"><a class="page-link" href="#">1</a></li>
                <li class="page-item"><a class="page-link" href="#">2</a></li>
                <li class="page-item"><a class="page-link" href="#">3</a></li>
                <li class="page-item">
                    <a class="page-link" href="#">Next</a>
                </li>
            </ul>
        </nav>
        {% endif %}
    </div>
</div>

{% endblock %}